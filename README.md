# [MatrixVPN](https://t.me/MatrixVPNTunnel_bot)
|Уникальное решение с поддержкой АнтиЗапрет и полного туннелирования с использованием протоколов **VLESS (XTLS, Reality)**, **OpenVPN** (с патчем для обхода блокировок), **WireGuard** и **AmneziaWG**|
|------------------|

  Этот проект представляет собой Telegram-бота для управления доступом к VPN. Он позволяет пользователям
  запрашивать, продлевать и управлять своими конфигурациями VPN, а администраторам предоставляет инструменты для
  управления пользователями и сервисом.

  ## Возможности

  *   **Регистрация новых пользователей**: Пошаговый процесс для новых пользователей для запроса доступа к VPN.
  *   **Управление конфигурациями VPN**: Пользователи могут получать файлы конфигурации для различных протоколов
  VPN.
  *   **Инструменты администратора**: Администраторы могут одобрять или отклонять запросы на доступ, продлевать
  подписки пользователей, удалять пользователей и отправлять широковещательные сообщения всем пользователям.
  *   **Запланированные задачи**: Автоматизированные задачи для отправки напоминаний об оплате, проверки истекших
  учетных записей и ежедневного резервного копирования базы данных.
  *   **Информационные меню**: Пользователи могут получить доступ к информации о доступных протоколах VPN и
  вариантах подключения.

  ## Структура проекта

  Проект организован в следующие каталоги:

  ```
  MatrixVPN/
  ├── assets/             # Статические ресурсы, такие как изображения и GIF-файлы
  ├── config/             # Настройки и конфигурации приложения
  ├── core/               # Основные компоненты приложения, такие как инициализация бота и базы данных
  ├── modules/            # Модули для конкретных функций (администратор, общие, регистрация пользователей, управление VPN)
  ├── services/           # Повторно используемые утилиты и внешние интеграции
  ├── main.py             # Основная точка входа в приложение
  ├── README.md           # Этот файл
  ├── requirements.txt    # Зависимости Python
  └── setup.sh            # Скрипт для первоначальной настройки проекта
  ```

  ## Установка и запуск

  Чтобы настроить и запустить бота, выполните следующие действия:

  1.  **Клонируйте репозиторий:**
      ```bash
      git clone https://github.com/QuasyStellar/MatrixVPN.git
      cd MatrixVPN
      ```

  2.  **Запустите скрипт установки:**
      Скрипт `setup.sh` автоматизирует весь процесс установки. Он запросит у вас необходимую информацию, такую как
   токен вашего Telegram-бота и идентификатор администратора.

      ```bash
      chmod +x setup.sh
      ./setup.sh
      ```

      Скрипт выполнит следующие действия:
      *   Создаст файл `.env` с вашей конфигурацией.
      *   Настроит виртуальное окружение Python.
      *   Установит необходимые зависимости из `requirements.txt`.
      *   Создаст и запустит службу `systemd` для работы бота в фоновом режиме.

  3.  **Проверьте установку:**
      После завершения работы скрипта вы можете проверить статус службы с помощью:
      ```bash
      sudo systemctl status bot
      ```

  ## Использование

  *   **Взаимодействие с пользователем**: Пользователи могут взаимодействовать с ботом, отправив команду `/start`
  в Telegram.
  *   **Панель администратора**: Если ваш идентификатор пользователя Telegram настроен как `ADMIN_ID` в файле
  `.env`, вы можете получить доступ к панели администратора, отправив команду `/admin`.

  ### Команды администратора

  *   **/admin**: Открывает панель администратора с возможностью:
      *   Проверить запросы на доступ.
      *   Удалить пользователя.
      *   Отправить широковещательное сообщение.
      *   Получить список всех пользователей.
  *   **/renewall**: Продлевает конфигурацию VPN для всех активных пользователей.
  *   **/renew <user_id> <+><days>**: Продлевает подписку пользователя, добавляя указанное количество дней к текущей
   дате окончания доступа, если указан +, в противном случае, устанавливает дату окончания.
  *   **/update <user_id> <days>**: Устанавливает срок действия подписки пользователя на указанное количество дней
   с текущей даты.

  ## Логирование

  Логи бота управляются `systemd` и могут быть просмотрены с помощью `journalctl`:

  ```bash
  sudo journalctl -u bot -f
  ```
